From b97c26bd4e44c4d0e7d0cb44d7df1bde48f3c6c7 Mon Sep 17 00:00:00 2001
From: crvi <crvisqr@gmail.com>
Date: Fri, 31 Jan 2020 20:52:07 +0530
Subject: [PATCH] magnatune: fix issues with album art storing so that they
 load properly

Fixes: #1767
---
 plugins/magnatune/MagnatuneSource.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/plugins/magnatune/MagnatuneSource.py b/plugins/magnatune/MagnatuneSource.py
index 834d9fa03..95a662773 100644
--- a/plugins/magnatune/MagnatuneSource.py
+++ b/plugins/magnatune/MagnatuneSource.py
@@ -516,12 +516,12 @@ class MagnatuneSource(RB.BrowserSource):
 	def playing_entry_changed(self, entry):
 		if not self.__db or not entry:
 			return
-		if entry.get_entry_type() != self.__db.entry_type_get_by_name("MagnatuneEntryType"):
+		if entry.get_entry_type() != self.__db.entry_type_get_by_name("magnatune"):
 			return
 
 		sku = self.__sku_dict[entry.get_string(RB.RhythmDBPropType.LOCATION)]
 		key = RB.ExtDBKey.create_storage("album", entry.get_string(RB.RhythmDBPropType.ALBUM))
 		key.add_field("artist", entry.get_string(RB.RhythmDBPropType.ARTIST))
-		self.__art_store.store_uri(key, self.__art_dict[sku])
+		self.__art_store.store_uri(key, RB.ExtDBSourceType.EMBEDDED, self.__art_dict[sku])
 
 GObject.type_register(MagnatuneSource)
-- 
2.24.1

